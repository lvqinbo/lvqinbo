<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>自定义字体</title>
<style>
input,textarea{outline:none; resize: none; border: none;}
#wrap{width: 940px; margin: 20px auto; font-family: "微软雅黑"; overflow: hidden;}
#wrap div{width: 358px; height: 100px; border: 1px solid #ccc; padding: 10px 20px; float: left;}
.showinfo{overflow-y: auto;}
.showinfo span{background: #f30; width: 30px; height: 30px; line-height: 30px; margin: 2px 5px; text-align: center; font-size: 20px; color: #333; display: inline-block; background-size: cover;}
.choose{width: 100px; padding: 10px 0; margin-left: 20px; float: left;}
.txtin textarea{width: 100%; height: 100%; font-family: inherit;  box-sizing: border-box;}
#wrap input{padding: 2px 5px; width: 80px; height: 25px; float: right; margin: 10px 20px 0 0;}
</style>
<script>
	window.onload = function(){
		var oWrap = document.getElementById('wrap');
		var oShowInfo = oWrap.getElementsByClassName('showinfo')[0];
		var oTxtIn = document.getElementById('txtin');
		var oSelct = document.getElementById('setbg');
		var oSendBtn = document.getElementById('sbtn');

		// 发送函数
		function fnSend(){
			var str = oTxtIn.value;
			var val = oSelct.value;
			var re = /\s/;
			for (var i = 0; i < str.length; i++) {
				if(re.test(str[i])){
					continue;
				}
				switch(val){
					case 'bj':
						oShowInfo.innerHTML += '<span style="background: '+randomColor()+'">'+str[i]+'</span>';
						break;
					case 'qq':
						oShowInfo.innerHTML += '<span style="background: url(img/qiqiu.png)no-repeat; background-size: cover;">'+str[i]+'</span>';
						break;
					default:
						oShowInfo.innerHTML += str[i];
						break;
				}
			}
			oTxtIn.value = '';
			oShowInfo.innerHTML +=  '<br>';
		}
		// 点击按钮事件
		oSendBtn.onclick = function(){
			fnSend();
		}
		// 键盘事件 ctrl + enter键
		document.onkeydown = function(ev){
			var ev = ev || event;
			if(ev.keyCode == 13 && ev.ctrlKey){
				fnSend();
			}
		}
		// 随机函数
		function randomVal(val){
			return Math.floor(Math.random() * (val + 1));
		}
		// 随机颜色
		function randomColor(){
			return 'rgb(' + randomVal(255) + ',' + randomVal(255) + ',' + randomVal(255) + ')';
		}
	}

</script>
</head>
<body>
	<div id="wrap">
		<div class="showinfo"></div>
		<p class="choose">
			<select name="setbg" id="setbg">
				<option value="pt">普通字体</option>
				<option value="bj">背景字体</option>
				<option value="qq">气球字体</option>
			</select>
		</p>
		<div class="txtin">
			<textarea name="txt" id="txtin" cols="30" rows="10" placeholder="按ctrl + enter键 可发送，空格将被忽略，请使用标点符号！"></textarea>
		</div>
		<input type="button" value="发送" id="sbtn">
	</div>
</body>
</html>