<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Canvas图片旋转</title>
	<style>
	#wrap{width: 960px; text-align: center; margin: 20px auto; position: relative; transition: 1s;}
	#wrap .rtt{width: 50px; height: 50px; display: inline-block; position: absolute; left: 900px; top: 150px; background: url(data/rtd.png)no-repeat; background-size: cover; z-index: 2;}
	#c1{transition: all 1s;}
	</style>
	<script>
	window.onload = function(){
		var oWrap = document.querySelector('#wrap');
		var oBtn = oWrap.getElementsByTagName('a')[0];
		var oImg = oWrap.getElementsByTagName('img')[0];
		var iNum = 0;

		var objimg = new Image();
		objimg.onload = function(){
			drawimg(oImg);
		}
		objimg.src = oImg.src;

		function drawimg(obj){
			var oC = document.createElement('canvas');
			oC.id = 'c1';
			var oGc = oC.getContext('2d');

			oC.width = obj.width;
			oC.height = obj.height;
			obj.parentNode.replaceChild(oC,obj);
			oGc.drawImage(obj,0,0);
			
			oBtn.onclick = function(){
				if(iNum == 4){
					iNum = 0;
				}
				iNum++;
				fnRotate();
			}
			function fnRotate(){
				switch(iNum){
					case 1:
						oC.width = obj.height;
						oC.height = obj.width;
						oGc.rotate( 90 * Math.PI/180 );
						oGc.drawImage( obj,0,-obj.height );
						break;
					case 2:
						oC.width = obj.width;
						oC.height = obj.height;
						oGc.rotate( 180 * Math.PI/180 );
						oGc.drawImage( obj,-obj.width,-obj.height );
						break;
					case 3:
						oC.width = obj.height;
						oC.height = obj.width;
						oGc.rotate( 270 * Math.PI/180 );
						oGc.drawImage( obj,-obj.width,0 );
						break;
					case 4:
						oC.width = obj.width;
						oC.height = obj.height;
						oGc.rotate( 0 );
						oGc.drawImage( obj,0,0 );
						break;
				}
			}
		}
	}
	</script>
</head>
<body>
	<div id="wrap">
		<a href="javascript:;" class="rtt"></a>
		<img src="data/pic.jpg" alt="">
	</div>
</body>
</html>