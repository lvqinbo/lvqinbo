<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>图片切换效果五 - 无缝切换</title>
	<style>
	body,ul,p{margin:0; padding:0; }
	#box{width: 518px; height: 255px; margin:20px auto 0; position: relative; font-family: Tahoma; overflow: hidden;}
	#box a{width:50px; height: 50px; display: inline-block; text-align: center; line-height: 50px; text-decoration: none; color:#fff; background: rgba(255,100,0,0.4); position: absolute; top: 102px; z-index: 1;}
	#box a:hover{background:rgba(255,100,0,1);}
	a.prev{left: 10px;}
	a.next{right: 10px;}
	#ul1{width: 1036px; height: 255px; position: absolute; left:0; top:0;}
	#ul1 li{width: 518px; height: 255px; float:left; list-style: none; }
	#ul1 img{width: 518px; height: 255px; }
	#btn {width: 125px; height: 20px; position: absolute; bottom:10px; right: 10px;}
	#btn span {width: 20px; height: 20px; display: inline-block; float:left; margin-right: 5px; color:#333; background: #FFFFF0; list-style: none; text-align: center;  }
	#btn .hover{background: #f60; color:#fff;}
	</style>
	<script src="../../../js/doMove.js"></script>
	<script>
	window.onload = function(){
		var oBox = document.getElementById('box');
		var oUl = document.getElementById('ul1');
		var aLi = oUl.getElementsByTagName('li');
		var aImg = oUl.getElementsByTagName('img');
		var aBtn = document.getElementById('btn');
		var aSpan = aBtn.getElementsByTagName('span');
		var oPrev = document.getElementsByClassName('prev')[0];
		var oNext = document.getElementsByClassName('next')[0];

		var iNow = num = 0;
		var timer = null;
		var onOff = true;
		var arrImg = ['img/1.jpg','img/2.jpg','img/3.jpg','img/4.jpg','img/5.jpg'];

		for (var i = 0; i < aSpan.length; i++) {
			aSpan[i].index = i;
			aSpan[i].onmouseover = function(){
				for (var i = 0; i < aSpan.length; i++) {
					aSpan[i].className = '';
					};
					this.className = 'hover';
				}
			aSpan[i].onclick = function(){
				if(this.index == iNow){return;}
				if(this.index > iNow){
					iNow = this.index;
					fnTab(1);
				}else{
					iNow = this.index;
					fnTab(-1);
				}
			}
		};

		oPrev.onclick = function(){
			if(!onOff){return;}
			iNow--;
			if(iNow == -1){
				iNow=arrImg.length-1;
			}
			clearStyle();
			fnTab(-1);
		}
		oNext.onclick = function(){
			if(!onOff){return;}
			toRun();

		};
		timer = setInterval(toRun,2000);

		function toRun(){
			iNow++;
			if(iNow == arrImg.length){
				iNow=0;
			}	
			clearStyle();
			fnTab(1);
		}

		function fnTab(n){
			if(!onOff){return;}
			onOff = false;

			if(n > 0){
				aImg[0].src = arrImg[num];
				aImg[1].src = arrImg[iNow];
				oUl.style.left = 0;
				doMove(oUl,{left : -518},function(){ onOff = true;});
			}
			else if(n < 0){
				aImg[0].src = arrImg[iNow];
				aImg[1].src = arrImg[num];
				oUl.style.left = '-518px';
				doMove(oUl,{left : 0},function(){ onOff = true;});
			}
			num = iNow;
		}
		function clearStyle(){
			for (var i = 0; i < aSpan.length; i++) {
				aSpan[i].className = '';
			};
			aSpan[iNow].className = 'hover';
		}
		oBox.onmouseover = function(){
			clearInterval(timer);
		}
		oBox.onmouseout = function(){
			timer = setInterval(toRun,2000);
		}
		
	}
	</script>
</head>
<body>
	<div id="box">
		<a class="prev" href="javascript:;"><</a>
		<a class="next" href="javascript:;">></a>
		<ul id="ul1">
			<li><img src="img/1.jpg" alt="遇龙河"></li>
			<li><img src="img/2.jpg" alt="遇龙河"></li>
		</ul>
		<p id="btn">
			<span class="hover">1</span>
			<span>2</span>
			<span>3</span>
			<span>4</span>
			<span>5</span>
		</p>
	</div>
</body>
</html>